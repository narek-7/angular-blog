"use strict";(self.webpackChunkangular_blog=self.webpackChunkangular_blog||[]).push([[317],{7317:(it,v,u)=>{u.r(v),u.d(v,{AdminModule:()=>ot});var t=u(8274),_=u(6331),m=u(4513);let g=(()=>{class n{constructor(e,o){this.auth=e,this.router=o}canActivate(e,o){return!!this.auth.isAuthenticated()||(this.auth.logout(),this.router.navigate(["/admin","login"],{queryParams:{loginAgain:!0}}),!1)}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(_.e),t.LFG(m.F0))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac}),n})();var s=u(6895),r=u(433),A=u(4466),h=u(6750),x=u(7579);let d=(()=>{class n{constructor(){this.alert$=new x.x}success(e){this.alert$.next({type:"success",text:e})}warning(e){this.alert$.next({type:"warning",text:e})}danger(e){this.alert$.next({type:"danger",text:e})}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac}),n})();var Z=u(7120);function T(n,i){1&n&&(t.TgZ(0,"small"),t._uU(1," Enter the name of the post "),t.qZA())}function q(n,i){if(1&n&&(t.TgZ(0,"div",10),t.YNc(1,T,2,0,"small",11),t.qZA()),2&n){const e=t.oxw();let o;t.xp6(1),t.Q6J("ngIf",null==(o=e.form.get("title"))||null==o.errors?null:o.errors.required)}}function w(n,i){1&n&&(t.TgZ(0,"small"),t._uU(1," Enter the author of the post "),t.qZA())}function y(n,i){if(1&n&&(t.TgZ(0,"div",10),t.YNc(1,w,2,0,"small",11),t.qZA()),2&n){const e=t.oxw();let o;t.xp6(1),t.Q6J("ngIf",null==(o=e.form.get("author"))||null==o.errors?null:o.errors.required)}}const b=function(n){return{invalid:n}};let P=(()=>{class n{constructor(e,o){this.postsService=e,this.alertService=o}ngOnInit(){this.form=new r.cw({title:new r.NI(null,r.kI.required),text:new r.NI(null,r.kI.required),author:new r.NI(null,r.kI.required)})}submit(){if(this.form.invalid)return;const e={title:this.form.value.title,author:this.form.value.author,text:this.form.value.text,date:new Date};this.postsService.create(e).subscribe(()=>{this.form.reset(),this.alertService.success("Post has been created!")})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(h.P),t.Y36(d))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-create-page"]],decls:19,vars:10,consts:[[3,"formGroup","ngSubmit"],[1,"form-control",3,"ngClass"],["for","title"],["id","title","type","text","formControlName","title"],["class","validation",4,"ngIf"],[1,"form-control"],["formControlName","text"],["for","author"],["id","author","type","text","formControlName","author"],["type","submit",1,"btn","btn-block","btn-primary",3,"disabled"],[1,"validation"],[4,"ngIf"]],template:function(e,o){if(1&e&&(t.TgZ(0,"form",0),t.NdJ("ngSubmit",function(){return o.submit()}),t.TgZ(1,"h1"),t._uU(2,"Creating a new post"),t.qZA(),t.TgZ(3,"div",1)(4,"label",2),t._uU(5,"Post name:"),t.qZA(),t._UZ(6,"input",3),t.YNc(7,q,2,1,"div",4),t.qZA(),t.TgZ(8,"div",5)(9,"label"),t._uU(10,"Post Content:"),t.qZA(),t._UZ(11,"quill-editor",6),t.qZA(),t.TgZ(12,"div",1)(13,"label",7),t._uU(14,"Author of post:"),t.qZA(),t._UZ(15,"input",8),t.YNc(16,y,2,1,"div",4),t.qZA(),t.TgZ(17,"button",9),t._uU(18," Create a post "),t.qZA()()),2&e){let l,a,c,p;t.Q6J("formGroup",o.form),t.xp6(3),t.Q6J("ngClass",t.VKq(6,b,(null==(l=o.form.get("title"))?null:l.touched)&&(null==(l=o.form.get("title"))?null:l.invalid))),t.xp6(4),t.Q6J("ngIf",(null==(a=o.form.get("title"))?null:a.touched)&&(null==(a=o.form.get("title"))?null:a.invalid)),t.xp6(5),t.Q6J("ngClass",t.VKq(8,b,(null==(c=o.form.get("author"))?null:c.touched)&&(null==(c=o.form.get("author"))?null:c.invalid))),t.xp6(4),t.Q6J("ngIf",(null==(p=o.form.get("author"))?null:p.touched)&&(null==(p=o.form.get("author"))?null:p.invalid)),t.xp6(1),t.Q6J("disabled",o.form.invalid)}},dependencies:[s.mk,s.O5,r._Y,r.Fj,r.JJ,r.JL,r.sg,r.u,Z.g6],styles:["form[_ngcontent-%COMP%]{max-width:600px;margin:0 auto}"]}),n})();var f=u(727);let I=(()=>{class n{transform(e,o=""){return o.trim()?e.filter(l=>l.title.toLowerCase().includes(o.toLowerCase())):e}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275pipe=t.Yjl({name:"searchPosts",type:n,pure:!0}),n})();const S=function(n){return["/admin","post",n,"edit"]};function J(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.ALo(9,"date"),t.qZA(),t.TgZ(10,"td")(11,"button",5),t._uU(12," Open "),t.qZA(),t.TgZ(13,"a",6),t.NdJ("click",function(){const a=t.CHM(e).$implicit,c=t.oxw(2);return t.KtG(c.remove(a.id))}),t._uU(14,"Delete"),t.qZA()()()}if(2&n){const e=i.$implicit,o=i.index;t.xp6(2),t.Oqu(o+1),t.xp6(2),t.Oqu(e.author),t.xp6(2),t.Oqu(e.title),t.xp6(2),t.Oqu(t.gM2(9,5,e.date,"medium","","en")),t.xp6(3),t.Q6J("routerLink",t.VKq(10,S,e.id))}}function U(n,i){if(1&n&&(t.TgZ(0,"div")(1,"table")(2,"thead")(3,"tr")(4,"th"),t._uU(5,"#"),t.qZA(),t.TgZ(6,"th"),t._uU(7,"Author"),t.qZA(),t.TgZ(8,"th"),t._uU(9,"Name"),t.qZA(),t.TgZ(10,"th"),t._uU(11,"Date"),t.qZA(),t.TgZ(12,"th"),t._uU(13,"Action"),t.qZA()()(),t.TgZ(14,"tbody"),t.YNc(15,J,15,12,"tr",4),t.ALo(16,"searchPosts"),t.qZA()()()),2&n){const e=t.oxw();t.xp6(15),t.Q6J("ngForOf",t.xi3(16,1,e.posts,e.searchString))}}function N(n,i){1&n&&(t.TgZ(0,"p",7),t._uU(1,"Loading..."),t.qZA())}let L=(()=>{class n{constructor(e,o){this.postsService=e,this.alertService=o,this.searchString="",this.postSub=new f.w0,this.deleteSub=new f.w0}ngOnInit(){this.postSub=this.postsService.getAll().subscribe(e=>{this.posts=e})}remove(e){this.deleteSub=this.postsService.remove(e).subscribe(()=>{this.posts=this.posts.filter(o=>o.id!==e),this.alertService.danger("Post has been deleted!")})}ngOnDestroy(){this.postSub&&this.postSub.unsubscribe(),this.deleteSub&&this.deleteSub.unsubscribe()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(h.P),t.Y36(d))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-dashboard-page"]],decls:5,vars:3,consts:[[1,"form-control"],["type","text","placeholder","Find the post...",3,"ngModel","ngModelChange"],[4,"ngIf","ngIfElse"],["loading",""],[4,"ngFor","ngForOf"],[1,"btn","btn-link","open",3,"routerLink"],[3,"click"],[1,"text-center"]],template:function(e,o){if(1&e&&(t.TgZ(0,"div",0)(1,"input",1),t.NdJ("ngModelChange",function(a){return o.searchString=a}),t.qZA()(),t.YNc(2,U,17,4,"div",2),t.YNc(3,N,2,0,"ng-template",null,3,t.W1O)),2&e){const l=t.MAs(4);t.xp6(1),t.Q6J("ngModel",o.searchString),t.xp6(1),t.Q6J("ngIf",null==o.posts?null:o.posts.length)("ngIfElse",l)}},dependencies:[s.sg,s.O5,r.Fj,r.JJ,r.On,m.rH,s.uU,I],styles:[".open[_ngcontent-%COMP%]{margin-right:10px}"]}),n})();function Y(n,i){1&n&&(t.TgZ(0,"small"),t._uU(1," Enter the name of the post "),t.qZA())}function O(n,i){if(1&n&&(t.TgZ(0,"div",10),t.YNc(1,Y,2,0,"small",11),t.qZA()),2&n){const e=t.oxw(2);let o;t.xp6(1),t.Q6J("ngIf",null==(o=e.form.get("title"))||null==o.errors?null:o.errors.required)}}const Q=function(n){return{invalid:n}};function F(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"div")(1,"form",2),t.NdJ("ngSubmit",function(){t.CHM(e);const l=t.oxw();return t.KtG(l.submit())}),t.TgZ(2,"h1"),t._uU(3,"Creating a new post"),t.qZA(),t.TgZ(4,"div",3)(5,"label",4),t._uU(6,"Post name:"),t.qZA(),t._UZ(7,"input",5),t.YNc(8,O,2,1,"div",6),t.qZA(),t.TgZ(9,"div",7)(10,"label"),t._uU(11,"Post Content:"),t.qZA(),t._UZ(12,"quill-editor",8),t.qZA(),t.TgZ(13,"button",9),t._uU(14," Edit a post "),t.qZA()()()}if(2&n){const e=t.oxw();let o,l;t.xp6(1),t.Q6J("formGroup",e.form),t.xp6(3),t.Q6J("ngClass",t.VKq(4,Q,(null==(o=e.form.get("title"))?null:o.touched)&&(null==(o=e.form.get("title"))?null:o.invalid))),t.xp6(4),t.Q6J("ngIf",(null==(l=e.form.get("title"))?null:l.touched)&&(null==(l=e.form.get("title"))?null:l.invalid)),t.xp6(5),t.Q6J("disabled",e.form.invalid||e.submitted)}}function E(n,i){1&n&&(t.TgZ(0,"p",12),t._uU(1,"loading..."),t.qZA())}let k=(()=>{class n{constructor(e,o,l,a){this.postsService=e,this.route=o,this.router=l,this.alertService=a,this.submitted=!1,this.updateSub=new f.w0}ngOnInit(){this.route.params.subscribe(e=>{this.postsService.getById(e.id).subscribe(o=>{this.post=o,this.form=new r.cw({title:new r.NI(o.title,r.kI.required),text:new r.NI(o.text)})})})}submit(){if(this.form.invalid)return;this.submitted=!0;const e={...this.post,title:this.form.value.title,text:this.form.value.text};this.updateSub=this.postsService.update(e).subscribe(()=>{this.router.navigate(["/admin","dashboard"]),this.submitted=!1,this.alertService.warning("Post has been edited!")})}ngOnDestroy(){this.updateSub&&this.updateSub.unsubscribe()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(h.P),t.Y36(m.gz),t.Y36(m.F0),t.Y36(d))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-edit-page"]],decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["loading",""],[3,"formGroup","ngSubmit"],[1,"form-control",3,"ngClass"],["for","title"],["id","title","type","text","formControlName","title"],["class","validation",4,"ngIf"],[1,"form-control"],["formControlName","text"],["type","submit",1,"btn","btn-primary",3,"disabled"],[1,"validation"],[4,"ngIf"],[1,"text-center"]],template:function(e,o){if(1&e&&(t.YNc(0,F,15,6,"div",0),t.YNc(1,E,2,0,"ng-template",null,1,t.W1O)),2&e){const l=t.MAs(2);t.Q6J("ngIf",o.form)("ngIfElse",l)}},dependencies:[s.mk,s.O5,r._Y,r.Fj,r.JJ,r.JL,r.sg,r.u,Z.g6]}),n})();function M(n,i){if(1&n&&(t.TgZ(0,"div",10),t._uU(1),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.hij(" ",e.message," ")}}function D(n,i){if(1&n&&(t.TgZ(0,"div",11),t._uU(1),t.qZA()),2&n){const e=i.ngIf;t.xp6(1),t.hij(" ",e," ")}}function G(n,i){1&n&&(t.TgZ(0,"small"),t._uU(1," Email is required! "),t.qZA())}function j(n,i){1&n&&(t.TgZ(0,"small"),t._uU(1," The email format is not correct! "),t.qZA())}function K(n,i){if(1&n&&(t.TgZ(0,"div",12),t.YNc(1,G,2,0,"small",13),t.YNc(2,j,2,0,"small",13),t.qZA()),2&n){const e=t.oxw();let o,l;t.xp6(1),t.Q6J("ngIf",null==(o=e.form.get("email"))||null==o.errors?null:o.errors.required),t.xp6(1),t.Q6J("ngIf",null==(l=e.form.get("email"))||null==l.errors?null:l.errors.email)}}function $(n,i){1&n&&(t.TgZ(0,"small"),t._uU(1," Password is required! "),t.qZA())}function z(n,i){1&n&&(t.TgZ(0,"small"),t._uU(1," Password must contain at least 6 characters! "),t.qZA())}function X(n,i){if(1&n&&(t.TgZ(0,"div",12),t.YNc(1,$,2,0,"small",13),t.YNc(2,z,2,0,"small",13),t.qZA()),2&n){const e=t.oxw();let o,l;t.xp6(1),t.Q6J("ngIf",null==(o=e.form.get("password"))||null==o.errors?null:o.errors.required),t.xp6(1),t.Q6J("ngIf",null==(l=e.form.get("password"))||null==l.errors?null:l.errors.minlength)}}const C=function(n){return{invalid:n}};let V=(()=>{class n{constructor(e,o,l){this.auth=e,this.router=o,this.route=l,this.submitted=!1,this.message=""}ngOnInit(){this.form=new r.cw({email:new r.NI("",[r.kI.required,r.kI.email]),password:new r.NI("",[r.kI.required,r.kI.minLength(6)])}),this.route.queryParams.subscribe(e=>{e.loginAgain?this.message="Enter your login details again!":e.authFailed&&(this.message="The session has expired, enter the data again!")})}submitForm(){this.form.invalid||(this.submitted=!0,this.auth.login({email:this.form.value.email,password:this.form.value.password}).subscribe(()=>{this.form.reset(),this.router.navigate(["/admin","dashboard"]),this.submitted=!1},()=>{this.submitted=!1}))}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(_.e),t.Y36(m.F0),t.Y36(m.gz))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-login-page"]],decls:18,vars:14,consts:[[1,"card",3,"formGroup","ngSubmit"],["class","alert alert-info",4,"ngIf"],["class","alert alert-danger",4,"ngIf"],[1,"form-conrol",3,"ngClass"],["for","email"],["id","email","type","email","formControlName","email"],["class","validation",4,"ngIf"],["for","password"],["id","password","type","password","formControlName","password"],["type","submit",1,"btn","btn-primary",3,"disabled"],[1,"alert","alert-info"],[1,"alert","alert-danger"],[1,"validation"],[4,"ngIf"]],template:function(e,o){if(1&e&&(t.TgZ(0,"form",0),t.NdJ("ngSubmit",function(){return o.submitForm()}),t.TgZ(1,"h1"),t._uU(2,"Login to admin panel"),t.qZA(),t.YNc(3,M,2,1,"div",1),t.YNc(4,D,2,1,"div",2),t.ALo(5,"async"),t.TgZ(6,"div",3)(7,"label",4),t._uU(8,"Email:"),t.qZA(),t._UZ(9,"input",5),t.YNc(10,K,3,2,"div",6),t.qZA(),t.TgZ(11,"div",3)(12,"label",7),t._uU(13,"Password:"),t.qZA(),t._UZ(14,"input",8),t.YNc(15,X,3,2,"div",6),t.qZA(),t.TgZ(16,"button",9),t._uU(17," LogIn "),t.qZA()()),2&e){let l,a,c,p;t.Q6J("formGroup",o.form),t.xp6(3),t.Q6J("ngIf",o.message),t.xp6(1),t.Q6J("ngIf",t.lcZ(5,8,o.auth.error$)),t.xp6(2),t.Q6J("ngClass",t.VKq(10,C,(null==(l=o.form.get("email"))?null:l.invalid)&&(null==(l=o.form.get("email"))?null:l.touched))),t.xp6(4),t.Q6J("ngIf",(null==(a=o.form.get("email"))?null:a.invalid)&&(null==(a=o.form.get("email"))?null:a.touched)),t.xp6(1),t.Q6J("ngClass",t.VKq(12,C,(null==(c=o.form.get("password"))?null:c.invalid)&&(null==(c=o.form.get("password"))?null:c.touched))),t.xp6(4),t.Q6J("ngIf",(null==(p=o.form.get("password"))?null:p.invalid)&&(null==(p=o.form.get("password"))?null:p.touched)),t.xp6(1),t.Q6J("disabled",o.form.invalid||o.submitted)}},dependencies:[s.mk,s.O5,r._Y,r.Fj,r.JJ,r.JL,r.sg,r.u,s.Ov],styles:["form[_ngcontent-%COMP%]{max-width:500px;margin:2rem auto}"]}),n})();const B=function(n,i,e){return{"alert-success":n,"alert-warning":i,"alert-danger":e}};function H(n,i){if(1&n&&(t.TgZ(0,"div",1)(1,"div",2)(2,"p"),t._uU(3),t.qZA()()()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngClass",t.kEZ(2,B,"success"===e.type,"warning"===e.type,"danger"===e.type)),t.xp6(2),t.Oqu(e.text)}}let W=(()=>{class n{constructor(e){this.alertService=e,this.delay=5e3,this.text="",this.type="success",this.alertSub=new f.w0}ngOnInit(){this.alertService.alert$.subscribe(e=>{this.text=e.text,this.type=e.type;const o=setTimeout(()=>{clearTimeout(o),this.text=""},this.delay)})}ngOnDestroy(){this.alertSub&&this.alertSub.unsubscribe()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(d))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-alert"]],decls:1,vars:1,consts:[["class","alert-wrap",4,"ngIf"],[1,"alert-wrap"],[1,"alert",3,"ngClass"]],template:function(e,o){1&e&&t.YNc(0,H,4,6,"div",0),2&e&&t.Q6J("ngIf",o.text)},dependencies:[s.mk,s.O5],styles:[".alert-wrap[_ngcontent-%COMP%]{position:fixed;top:80px;right:200px;max-width:200px}"]}),n})();const R=function(){return["/admin","dashboard"]},tt=function(){return["/admin","create"]};function et(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"ul")(1,"li",4)(2,"a",5),t._uU(3,"Main"),t.qZA()(),t.TgZ(4,"li",4)(5,"a",5),t._uU(6,"Create"),t.qZA()(),t.TgZ(7,"li")(8,"a",6),t.NdJ("click",function(l){t.CHM(e);const a=t.oxw();return t.KtG(a.logOut(l))}),t._uU(9,"LogOut"),t.qZA()()()}2&n&&(t.xp6(2),t.Q6J("routerLink",t.DdM(2,R)),t.xp6(3),t.Q6J("routerLink",t.DdM(3,tt)))}const nt=[{path:"",component:(()=>{class n{constructor(e,o){this.router=e,this.auth=o}ngOnInit(){}logOut(e){e.preventDefault(),this.auth.logout(),this.router.navigate(["/admin","login"])}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(m.F0),t.Y36(_.e))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-admin-layout"]],decls:7,vars:1,consts:[[1,"navbar","bg-primary"],["router-link","/"],[4,"ngIf"],[1,"container"],["routerLinkActive","active"],[3,"routerLink"],["href","#",3,"click"]],template:function(e,o){1&e&&(t._UZ(0,"app-alert"),t.TgZ(1,"nav",0)(2,"h1",1),t._uU(3,"Angular Admin"),t.qZA(),t.YNc(4,et,10,4,"ul",2),t.qZA(),t.TgZ(5,"div",3),t._UZ(6,"router-outlet"),t.qZA()),2&e&&(t.xp6(4),t.Q6J("ngIf",o.auth.isAuthenticated()))},dependencies:[s.O5,m.lC,m.yS,m.Od,W]}),n})(),children:[{path:"",redirectTo:"/admin/login",pathMatch:"full"},{path:"login",component:V},{path:"dashboard",component:L,canActivate:[g]},{path:"post/:id/edit",component:k,canActivate:[g]},{path:"create",component:P,canActivate:[g]}]}];let ot=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({providers:[g,d],imports:[s.ez,r.u5,r.UX,m.Bz.forChild(nt),A.m,m.Bz]}),n})()}}]);